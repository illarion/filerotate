# filerotate

Rotates [log] files generated by any kind of logger that is capable to use Writer in golang

![flow](flow.png "Flow")

## Configuration
```golang
// Options
type Options struct {
  // FilePath full path to the log file (i.e our.log)
  FilePath string
  // Rotate log file count times before removing. If Rotate count is 0, old versions are removed rather than rotated, so that only our.log is present
  Rotate int
  // Size of the file to grow. When exceeded, file is rotated.
  Size uint64
  // File mode, like 0600
  Mode os.FileMode
}
```

## Usage

```golang
package main

import (
	"log"
	"github.com/illarion/filerotate"
)

func main() {
    // Create a new file rotate
    fr, err := filerotate.New(filerotate.Options{
        FilePath: "our.log",
        Rotate:   3,
        Size:     1024,
        Mode:     0600,
    })
    
    if err != nil {
        log.Fatal(err)
    }
   
    // Connect log to the rotating writer
    log.SetOutput(fr)

    // Write to log number of times
    for i := 0; i < 10000; i++ {
        log.Printf("Hello, world %d\n", i)
    }
}
```

after runing the code, you will see the following files in the director

```log
~# go run main.go

~# ls -1
our.log
our.log.1
our.log.2
our.log.3
```

## License
MIT (see [LICENSE](LICENSE))